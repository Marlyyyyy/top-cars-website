
{% extends 'MartonTopCarsBundle:Default:index.html.twig' %}

{% block active_tab_game %} active{% endblock %}

{% block dash_line %}
    <div class="dash_line"></div>
{% endblock %}

{% block content %}

    <div class="content shadow">
        <div class="container game-container noselect">

            <div class="game_header">
                <button id="main-menu-button" class="menu-button button-blue">Main Menu</button>
                <button id="settings-button" class="menu-button button-blue">Settings</button>
                <div>

                    {% if is_classic_unlocked %}
                        <p>Your selected cars</p>
                        {% set img_path = asset('bundles/martontopcars/images/card_game/') %}
                        {% for car in selected_cars %}
                            <img class="mini-image" width="60px" src="{{ img_path ~ car.image }}"/>
                        {% endfor %}
                    {% endif %}

                </div>
            </div>

            <!-- Top Panel-->
            <div class="top_panel" id="top_panel">
                <div class="level_bar">

                    <div class="level_score" id="s_score"></div>

                    <div class="score_bar">
                        <div class="fill" id="s_fill"></div>
                    </div>

                </div>
            </div>

            <!-- Main Menu -->
            <div id="main-menu">
                <div class="game-type game-type-unlocked" id="free-for-all" style="background-image: url({{ asset('bundles/martontopcars/images/src/freeforall.jpg') }})">
                    <p>Free For All</p>
                </div>
                <div class="game-type {{ is_classic_unlocked ? 'game-type-unlocked' : 'game-type-locked' }}" id="classic" style="background-image: url({{ asset('bundles/martontopcars/images/src/classic.jpg') }})">
                    <p>Classic</p>
                </div>
            </div>

            <!-- Battlefield -->
            <div class="battlefield" id="battlefield">

            </div>

        </div>
    </div>

    <!-- Popups -->
    <div id="popup" class="popup">

        <div class="popup-content shadow">

            <div class="popup-tools">
                <span class="popup-exit"><img width="20px" height="20px" src="{{ asset('bundles/martontopcars/images/src/exit.png') }}"/>
                </span>
            </div>

            <h1 id="popup-header"></h1>

            <div id="error-block"></div>

            <div id="settings-block" class="popup-body">

                <div class="settings-row">

                    <div class="player-option active" id="player-option-2" data-players="2">
                        2 Players
                    </div>

                    <div class="player-option" id="player-option-2" data-players="3">
                        3 Players
                    </div>

                </div>

                <button type="button" class="button-cancel popup-exit">Cancel</button>
                <button type="button" class="button-save" id="settings-save">Save</button>

            </div>
        </div>
    </div>

{% endblock %}

{% block javascript %}

    <script>

        // Card Game
        var IMG_PREFIX = "{{ asset('bundles/martontopcars/images/card_game/') }}";
        var AJAX_POST_SCORE_PATH = "{{ path('marton_topcars_post_score') }}";
        var AJAX_FREE_FOR_ALL = "{{ path('marton_topcars_free_for_all') }}";
        var AJAX_CLASSIC = "{{ path('marton_topcars_classic') }}";

        GameModule.init(AJAX_POST_SCORE_PATH, AJAX_FREE_FOR_ALL, AJAX_CLASSIC, IMG_PREFIX);

    </script>

{% endblock %}
